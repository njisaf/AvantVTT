// ============================================================================
// ApplicationV2 Item Sheet Styles - INTEGRATION IN PROGRESS
// ============================================================================
// 
// ⚠️  DEPRECATION NOTICE: This file is being integrated into _item-sheets.scss
// 
// The styles in this file are causing conflicts with the base item sheet styles.
// Key conflicts:
// - .sheet-header using different layout structure (.profile-img vs .row-container)
// - Heavy use of !important declarations overriding base styles
// - Template structure mismatch (expects .charname vs modern form components)
// 
// MIGRATION STATUS:
// - [ ] Header styles integrated into base file
// - [ ] Tab styles consolidated 
// - [ ] Form styles unified
// - [ ] Template structure aligned
// - [ ] File marked for removal
// 
// Until integration is complete, most styles are commented out to prevent conflicts.
// ============================================================================

// ApplicationV2 Item Sheets - Specific targeting for v13 compatibility
.application.sheet.avant.item {
  // Clean window styling
  background: var(--theme-bg-primary, #2a2a2a) !important;
  border: 1px solid var(--theme-border-primary, #555) !important;
  min-height: 400px !important;

  // Window content container
  .window-content {
    background: var(--theme-bg-primary, #2a2a2a) !important;
    border: none !important;
    min-height: 350px !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    padding: 0 !important;

    // Main item sheet container
    .item-sheet {
      background: var(--theme-bg-primary, #2a2a2a) !important;
      border: none !important;
      min-height: 300px !important;
      display: flex !important;
      flex-direction: column !important;
      visibility: visible !important;
      opacity: 1 !important;
      padding: 0 !important;
      height: 100% !important;

      // HEADER STYLES COMMENTED OUT - INTEGRATED INTO BASE FILE
      // Uncomment and modify after integration is complete
      /*
      .sheet-header {
        background: var(--theme-bg-secondary, #333) !important;
        border-bottom: 1px solid var(--theme-border-primary, #555) !important;
        min-height: 60px !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: stretch !important;
        gap: var(--space-sm, 8px) !important;
        padding: 10px !important;
        flex-shrink: 0 !important;
      }
      */

      // Tab navigation system
      .sheet-tabs {
        background: var(--theme-bg-secondary, #333) !important;
        border-bottom: 1px solid var(--theme-border-primary, #555) !important;
        min-height: 36px !important;
        display: flex !important;
        flex-shrink: 0 !important;
        margin: 0 !important;
        padding: 0 !important;

        .item {
          padding: 8px 16px !important;
          background: transparent !important;
          border: none !important;
          color: var(--theme-text-secondary, #aaa) !important;
          font-size: 12px !important;
          font-weight: 600 !important;
          text-transform: uppercase !important;
          cursor: pointer !important;
          text-decoration: none !important;
          display: flex !important;
          align-items: center !important;
          height: 36px !important;
          border-bottom: 2px solid transparent !important;
          transition: all 0.2s ease !important;

          &:hover {
            background: rgba(0, 224, 220, 0.1) !important;
            color: var(--theme-accent-primary, #00e0dc) !important;
          }

          &.active {
            background: var(--theme-bg-primary, #2a2a2a) !important;
            color: var(--theme-text-primary, #ffffff) !important;
            border-bottom-color: var(--theme-accent-primary, #00e0dc) !important;
          }
        }
      }

      // Tab content area with proper visibility management
      .sheet-body {
        background: var(--theme-bg-primary, #2a2a2a) !important;
        border: none !important;
        min-height: 200px !important;
        display: block !important;
        flex: 1 !important;
        padding: 0 !important;
        overflow-y: auto !important;

        // Individual tab panels - Critical for ApplicationV2 tab functionality
        .tab {
          background: var(--theme-bg-primary, #2a2a2a) !important;
          border: none !important;
          min-height: 150px !important;
          display: none !important; // Hide all tabs by default
          padding: 15px !important;
          margin: 0 !important;

          // Only show the active tab
          &.active {
            display: block !important;
          }

          // Form elements within tabs
          .form-group {
            background: transparent !important;
            border: none !important;
            min-height: auto !important;
            display: block !important;
            margin-bottom: 15px !important;
            padding: 0 !important;

            label {
              background: transparent !important;
              color: var(--theme-text-secondary, #aaa) !important;
              font-size: 10px !important;
              font-weight: 600 !important;
              text-transform: uppercase !important;
              letter-spacing: 0.5px !important;
              display: block !important;
              margin-bottom: 4px !important;
              padding: 0 !important;
              border: none !important;
            }

            input,
            textarea,
            select {
              background: var(--theme-bg-tertiary, #444) !important;
              border: 1px solid var(--theme-border-primary, #555) !important;
              color: var(--theme-text-primary, #ffffff) !important;
              font-size: 12px !important;
              display: block !important;
              width: 100% !important;
              padding: 8px !important;
              min-height: auto !important;

              &:focus {
                border-color: var(--theme-accent-primary, #00e0dc) !important;
                outline: none !important;
                box-shadow: 0 0 8px rgba(0, 224, 220, 0.3) !important;
              }
            }

            textarea {
              min-height: 80px !important;
              resize: vertical !important;
            }

            // Trait chip input system styling
            .trait-chip-input {
              background: var(--theme-bg-tertiary, #444) !important;
              border: 1px solid var(--theme-border-primary, #555) !important;
              border-radius: 4px !important;
              padding: 4px !important;

              .trait-chips {
                display: flex !important;
                flex-wrap: wrap !important;
                gap: 4px !important;
                margin-bottom: 4px !important;

                .trait-chip {
                  display: inline-flex !important;
                  align-items: center !important;
                  gap: 4px !important;
                  padding: 4px 8px !important;
                  border-radius: 12px !important;
                  font-size: 10px !important;
                  font-weight: 500 !important;
                  line-height: 1.2 !important;
                  white-space: nowrap !important;

                  .trait-name {
                    color: inherit !important;
                  }

                  .trait-remove {
                    background: none !important;
                    border: none !important;
                    color: inherit !important;
                    font-size: 12px !important;
                    cursor: pointer !important;
                    padding: 0 !important;
                    margin-left: 4px !important;
                    opacity: 0.7 !important;
                    width: 16px !important;
                    height: 16px !important;
                    display: flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    border-radius: 50% !important;
                    transition: all 0.2s ease !important;

                    &:hover {
                      opacity: 1 !important;
                      background: rgba(0, 0, 0, 0.2) !important;
                    }

                    &:focus {
                      outline: 1px solid currentColor !important;
                      outline-offset: 1px !important;
                    }
                  }
                }
              }

              .trait-input-container {
                position: relative !important;

                .trait-autocomplete {
                  background: transparent !important;
                  border: none !important;
                  color: var(--theme-text-primary, #ffffff) !important;
                  padding: 4px !important;
                  width: 100% !important;
                  min-height: 24px !important;
                  font-size: 12px !important;

                  &::placeholder {
                    color: var(--theme-text-secondary, #aaa) !important;
                  }

                  &:focus {
                    outline: none !important;
                    box-shadow: none !important;
                  }
                }

                .trait-suggestions {
                  position: absolute !important;
                  top: 100% !important;
                  left: 0 !important;
                  right: 0 !important;
                  background: var(--theme-bg-secondary, #333) !important;
                  border: 1px solid var(--theme-border-primary, #555) !important;
                  border-radius: 4px !important;
                  max-height: 200px !important;
                  overflow-y: auto !important;
                  z-index: 1000 !important;
                  display: none !important;

                  &.visible {
                    display: block !important;
                  }

                  .trait-suggestion {
                    padding: 8px 12px !important;
                    cursor: pointer !important;
                    color: var(--theme-text-primary, #ffffff) !important;
                    border-bottom: 1px solid var(--theme-border-primary, #555) !important;
                    transition: background-color 0.2s ease !important;

                    &:hover {
                      background: var(--theme-bg-primary, #2a2a2a) !important;
                    }

                    &:last-child {
                      border-bottom: none !important;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  // Default active state - Ensure first tab is visible by default
  &:not(.has-active-tab) {
    .sheet-body .tab:first-child {
      display: block !important;
    }

    .sheet-tabs .item:first-child {
      background: var(--theme-bg-primary, #2a2a2a) !important;
      color: var(--theme-text-primary, #ffffff) !important;
      border-bottom-color: var(--theme-accent-primary, #00e0dc) !important;
    }
  }
}
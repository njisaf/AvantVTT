{{!--
Talent Item Sheet Template - Phase 3 Component Library Version

This template uses the unified component library to provide a clean,
accessible, and maintainable talent sheet experience. It replaces the
legacy talent template with modern component-based architecture.

Features:
- Component library partials for consistent styling
- Single-content layout without tabs
- Enhanced accessibility with proper ARIA support
- AP selector with progressive functionality
- Trait chip input with autocomplete
- Comprehensive form validation

Validation Keywords (for CI script):
- apCost
- ap-selector.hbs
- image-upload.hbs
- text-field.hbs
- traits-field.hbs
--}}

<div class="item-sheet talent-sheet flexcol" autocomplete="off" data-application-part="form">
{{!-- DEBUGGING: Use Handlebars helper (inline JS disabled in FoundryVTT v13+) --}}
{{debugContext "TALENT-TEMPLATE displayTraits" displayTraits}}
    {{!-- Header Section - Using Consistent Layout --}}
    {{> "systems/avant/templates/shared/partials/item-header"}}

    {{!-- Single Content Layout --}}
    {{#> "systems/avant/templates/shared/partials/single-content" class="talent-content"}}

    {{!-- Description Field --}}
    {{> "systems/avant/templates/shared/partials/textarea-field"
    name="system.description"
    value=system.description
    label="Description"
    placeholder="Enter detailed description of this talent..."
    rows=6
    maxlength=2000
    hint="Describe what this talent does and how the character acquired it"
    class="talent-description"}}

    {{!-- Backstory Field --}}
    {{> "systems/avant/templates/shared/partials/textarea-field"
    name="system.backstory"
    value=system.backstory
    label="Backstory"
    placeholder="How did your character learn this talent? (Optional)"
    rows=3
    maxlength=1000
    hint="Optional background story about how this talent was acquired"
    class="talent-backstory"}}

    {{!-- Form Row for Level Requirement --}}
    {{#> "systems/avant/templates/shared/partials/form-row" class="talent-requirements"}}
    {{> "systems/avant/templates/shared/partials/number-field"
    name="system.levelRequirement"
    value=system.levelRequirement
    label="Level Required"
    min=1
    max=20
    placeholder="1"
    hint="Minimum character level to learn this talent"
    class="talent-level-field"}}
    {{/"systems/avant/templates/shared/partials/form-row"}}

    {{!-- Traits Field --}}
    {{debugContext "TALENT-TEMPLATE before traits-field" displayTraits}}
    {{> "systems/avant/templates/shared/partials/traits-field"
    name="system.traits"
    displayTraits=displayTraits
    value=system.traits
    label="Traits"
    hint="Add traits to categorize and enhance this talent"
    editable=editable
    class="talent-traits"
    traitsData=displayTraits}}

    {{/"systems/avant/templates/shared/partials/single-content"}}
</div>